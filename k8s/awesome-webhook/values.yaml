# Default values for awesome-webhook.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: asm-webhook
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: 0.44

imagePullSecrets: [ ]
nameOverride: ""
fullnameOverride: ""
podAnnotations: { }
podSecurityContext: { }
# fsGroup: 2000

securityContext:
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 10001
  privileged: false
  allowPrivilegeEscalation: false

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

service:
  type: ClusterIP
  port: "9443"
  protocol: https

readinessProbePath: /health
livenessProbePath: /health

resources:
  limits:
    cpu: "2"
    memory: 4Gi
  requests:
    cpu: "2"
    memory: 2Gi


nodeSelector: { }

tolerations: [ ]

affinity: { }

mutate:
  mutateUrl: "/mutate"
  apiGroups:
    - "*"
  apiVersions:
    - "*"
  operations:
    - CREATE
  resources:
    - SparkApplication
    - SparkApplications
    - sparkapplications
    - sparkapplication
    - sparkapp
    - sparkapplications.sparkoperator.k8s.io
    - scheduledsparkapplications.sparkoperator.k8s.io
  scope: Namespaced
  sideEffects: None
  timeoutSeconds: 20
  objectSelector:
    matchExpressions:
      - key: deploymentApiType
        operator: NotIn
        values: ["nrt_job"]
      - key: amazme.webhook.status
        operator: NotIn
        values: ["disable"]


appConfig:
  spark:
    configMapName: asmwebhook-configmap
    configMapValue: ""

containerEnv:
  - name: LOG_LEVEL
    value: INFO
  - name: SPARK_CFG_PATH
    value: /etc/configs/spark.yaml
