FeatureList:
  - addToleration:
      enabled: True
      hardPatch: True
  - addAffinity:
      enabled: True
      hardPatch: True
  - addHistoryServer:
      enabled: True
      hardPatch: True
  - addPrometheusMonitoring:
      enabled: True
      hardPatch: True


SparkPatchValue:
  AmazmeSparkToleration:
    ml:
      - key: "app"
        operator: "Equal"
        value: "spark"
        effect: "NoExecute"

  AmazmeSparkAffinity:
    ml:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            -   matchExpressions:
                  -   key: "app.kubernetes.io/component"
                      operator: "In"
                      values:
                        - "spark"

  AmazmeSparkHistoryServerSpark:
    spark.eventLog.enabled: "true"
    spark.eventLog.dir: "s3a://amazme-st/spark-events"
    spark.eventLog.rolling.enabled: "true"
    spark.eventLog.rolling.maxFileSize: "128m"

  AmazmeSparkHistoryServerHadoop:
    fs.s3a.aws.credentials.provider: "com.amazonaws.auth.EnvironmentVariableCredentialsProvider"
    fs.s3a.endpoint: "https://obs.ru-moscow-1.hc.sbercloud.ru"
    fs.s3a.path.style.access: "true"
    fs.s3a.connection.ssl.enabled: "false"